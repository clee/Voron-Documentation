<h1 id="skr-1314-klipper-firmware">SKR 1.3/1.4 Klipper Firmware</h1>

<p>The firmware update process for both SKR 1.3 and SKR 1.4 is the same so the guides have been combined.</p>

<h3 id="required-items">Required Items</h3>

<ul>
  <li>Klipper must be installed onto the Raspberry Pi</li>
  <li>At least one microSD card needs to be available depending on number of controllers.</li>
</ul>

<h3 id="build-firmware-image">Build Firmware Image</h3>

<ul>
  <li>Login to the Raspberry Pi</li>
  <li>Run the following:</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install make
cd ~/klipper
make menuconfig
</code></pre></div></div>

<p>In the menu structure there are a number of items to be selected.</p>

<ul>
  <li>Ensure that the  micro-controller architecture is set to ‘LPC176x’</li>
  <li>If the SKR is a Turbo model, ensure the processor model is set to ‘lpc1769 (120 Mhz)’</li>
  <li>If the SKR is a non-Turbo model, ensure the processor model is set to ‘lpc1768 (100 Mhz)’</li>
</ul>

<p><img src="./images/klipper_turbo_selection.png" alt="" /></p>

<ul>
  <li>Ensure that “Target board uses Smoothieware bootloader” is enabled</li>
  <li>Ensure that “Use USB for communication (instead of serial)” is enabled</li>
</ul>

<p><img src="./images/klipper_menuconfig.png" alt="" /></p>

<p>Once the configuration is selected, select “Exit” and “Yes” if asked to save the configuration.</p>

<p>Run the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make clean
make
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">make</code> command, when completed, creates a firmware file <strong>klipper.bin</strong> that is store in the folder <code class="language-plaintext highlighter-rouge">/home/pi/klipper/out</code>.  This file need to be copied to both of the SKR boards.  The easiest way to do this is to use a GUI like <a href="https://winscp.net/eng/download.php">WinSCP</a> on Windows or either <a href="https://cyberduck.io">Cyberduck</a> or scp (from terminal) on Mac to copy the file to your computer.</p>

<p><img src="./images/cyberduck_example.png" alt="" /></p>

<h3 id="load-firmware-image">Load Firmware Image</h3>

<p>Copy the <strong>klipper.bin</strong> to the desktop, then rename it to <strong>firmware.bin</strong></p>

<p><strong>Important:</strong> If the file is not renamed, the bootloader will not be updated properly.</p>

<p>Ensure that all SKR boards are not powered, then remove the microSD card(s) that are installed.</p>

<p>Connect one of the microSD cards to the computer with the <strong>firmware.bin</strong> file.  Open the microSC card in the file browser.  There will be a file named ‘firmware.cur’, that file can be deleted or left alone, it will be overwritten later.</p>

<p>Copy the <strong>firmware.bin</strong> from the desktop onto the microSD card.  If problems are encountered transferring the file(s) to the microSD card, reformat the microSD card with a FAT32 filesystem and try again.</p>

<p><em>V2:</em> Repeat the process with the second microSD card.</p>

<p>Replace the microSD card(s) into the SKR(s).  If more than one, it does not matter which card goes into which controller.</p>

<p>Turn on the power supply to power on the SKR board(s).  If named properly, the SKR will automatically update with the Klipper firmware.</p>

<p><strong>Important:</strong> If the SKR(s) are not powered with 12-24V, Klipper will be unable to communicate with the TMC drivers via UART and the SKR will automatically shut down.</p>

<h3 id="back-to-software-installation">Back to <a href="./index.md#klipper-octoprint-configuration">Software Installation</a></h3>
